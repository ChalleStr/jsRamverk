(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{263:function(e,t){},333:function(e,t,a){},334:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),o=a(36),c=a.n(o),s=a(52),i=a(6),m=a(42),u=a(32),h=a(10),d=a.p+"static/media/charlottestrand.e60f8d2b.jpg",p=function(){var e=Object(r.useState)(""),t=Object(h.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)((function(){fetch("https://me-api.charlottestrand.me/").then((function(e){return e.json()})).then((function(e){return n(e.about)}))})),l.a.createElement("main",null,l.a.createElement("div",{className:"container"},l.a.createElement("img",{className:"img-me",src:d,alt:"Charlotte"}),l.a.createElement("div",{className:"me-div"},l.a.createElement("h1",null,"Om mig"),l.a.createElement("p",null,a))))},b=a(17),E=a(18),g=a(19),v=a(7),f=a(21),k=a(20),C=a(14),j=a(5),O=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={kmom:""},n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(v.a)(n)),n}return Object(g.a)(a,[{key:"handleInputChange",value:function(e){this.setState(Object(b.a)({},e.target.name,"number"===e.target.type?parseInt(e.target.value):e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.history.push("/reports/week/"+this.state.kmom)}},{key:"render",value:function(){return l.a.createElement("main",null,l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"me-div"},l.a.createElement("h3",null,"Show reports"),l.a.createElement(j.a,{onSubmit:this.handleSubmit},l.a.createElement(j.a.Group,{controlId:"formBasicNumber"},l.a.createElement(j.a.Label,null,"Week:"),l.a.createElement(j.a.Control,{type:"number",name:"kmom",onChange:this.handleInputChange})),l.a.createElement(C.a,{variant:"primary",type:"submit"},"Get report")))))}}]),a}(l.a.Component),y={token:""},w=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={week_nr:"",kmom_text:""},n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n.handleChange=n.handleChange.bind(Object(v.a)(n)),n.handleUpdateClick=n.handleUpdateClick.bind(Object(v.a)(n)),n}return Object(g.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(b.a)({},e.target.name,"number"===e.target.type?parseInt(e.target.value):e.target.value))}},{key:"handleUpdateClick",value:function(){this.props.history.push("/reports/add")}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),console.log(this.state),console.log(y.token),fetch("https://me-api.charlottestrand.me/reports/update",{method:"PUT",headers:{"x-access-token":y.token,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({week_nr:this.state.week_nr,kmom_text:this.state.kmom_text})}).then((function(e){return e.json()})).then((function(e){e.data?(console.log("Rapporten \xe4r uppdaterad!"),t.props.history.push("/reports/week/"+t.state.week_nr)):e.error&&console.log(e.error)})).catch((function(e){window.alert("There is no report with this week number!"),console.log("Error:",e.message)}))}},{key:"render",value:function(){return l.a.createElement("main",null,l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"me-div"},l.a.createElement("h4",null,"Update report"),l.a.createElement(j.a,{onSubmit:this.handleSubmit},l.a.createElement(j.a.Group,{controlId:"formBasicNumber"},l.a.createElement(j.a.Label,null,"Choose a week (number):"),l.a.createElement(j.a.Control,{type:"number",name:"week_nr",onChange:this.handleChange,required:!0})),l.a.createElement(j.a.Group,{controlId:"exampleForm.ControlTextarea1"},l.a.createElement(j.a.Label,null,"Text:"),l.a.createElement(j.a.Control,{as:"textarea",rows:"30",name:"kmom_text",onChange:this.handleChange,required:!0})),l.a.createElement(C.a,{className:"my-button",variant:"secondary",onClick:this.handleUpdateClick},"Go back")," ",l.a.createElement(C.a,{variant:"primary",type:"submit"},"Update")))))}}]),a}(l.a.Component),S=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={email:"",password:""},n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(v.a)(n)),n}return Object(g.a)(a,[{key:"handleInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(b.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),console.log(this.state),console.log(this.state.email),console.log(this.state.password),fetch("https://me-api.charlottestrand.me/register/",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({email:this.state.email,password:this.state.password})}).then((function(e){return e.json()})).then((function(e){return t.setState}))}},{key:"render",value:function(){return l.a.createElement("main",null,l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"me-div"},l.a.createElement("h3",null,"Register new user"),l.a.createElement(j.a,{onSubmit:this.handleSubmit},l.a.createElement(j.a.Group,{controlId:"formBasicEmail"},l.a.createElement(j.a.Label,null,"E-mail:"),l.a.createElement(j.a.Control,{type:"email",name:"email",placeholder:"Enter email",value:this.state.email,onChange:this.handleInputChange,required:!0})),l.a.createElement(j.a.Group,{controlId:"formBasicPassword"},l.a.createElement(j.a.Label,null,"Password:"),l.a.createElement(j.a.Control,{type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleInputChange,required:!0})),l.a.createElement(C.a,{variant:"primary",type:"submit"},"Register")))))}}]),a}(l.a.Component),N=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={email:"",password:""},n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(v.a)(n)),n}return Object(g.a)(a,[{key:"handleInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(b.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),console.log(this.state),console.log(this.state.email),console.log(this.state.password),fetch("https://me-api.charlottestrand.me/login/",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({email:this.state.email,password:this.state.password})}).then((function(e){return e.json()})).then((function(e){console.log(e.data.token),y.token=e.data.token,t.props.history.push("/reports/add")})).catch((function(e){console.error(e),console.log("Error logging in.")}))}},{key:"render",value:function(){return l.a.createElement("main",null,l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"me-div"},l.a.createElement("h3",null,"Admin login"),l.a.createElement(j.a,{onSubmit:this.handleSubmit},l.a.createElement(j.a.Group,{controlId:"formBasicEmail"},l.a.createElement(j.a.Label,null,"E-mail:"),l.a.createElement(j.a.Control,{type:"email",name:"email",placeholder:"Enter email",value:this.state.email,onChange:this.handleInputChange,required:!0})),l.a.createElement(j.a.Group,{controlId:"formBasicPassword"},l.a.createElement(j.a.Label,null,"Password:"),l.a.createElement(j.a.Control,{type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleInputChange,required:!0})),l.a.createElement(C.a,{variant:"primary",type:"submit"},"Login")))))}}]),a}(l.a.Component),x=function(e){Object(f.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).state={week_nr:"",kmom_text:""},n.handleSubmit=n.handleSubmit.bind(Object(v.a)(n)),n.handleChange=n.handleChange.bind(Object(v.a)(n)),n.handleUpdateClick=n.handleUpdateClick.bind(Object(v.a)(n)),n}return Object(g.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(b.a)({},e.target.name,"number"===e.target.type?parseInt(e.target.value):e.target.value))}},{key:"handleUpdateClick",value:function(){this.props.history.push("/reports/update")}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),console.log(this.state),console.log(y.token),fetch("https://me-api.charlottestrand.me/reports/add",{method:"POST",headers:{"x-access-token":y.token,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({week_nr:this.state.week_nr,kmom_text:this.state.kmom_text})}).then((function(e){201===e.status?(console.log("Det funkade!"),t.props.history.push("/reports/week/"+t.state.week_nr)):t.setState({status:"Funkade ej"})})).catch((function(e){window.alert("This week number already exists! Choose another number."),console.error("Error: ",e)}))}},{key:"render",value:function(){return l.a.createElement("main",null,l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"me-div"},l.a.createElement("h2",null,"Welcome!"),l.a.createElement("p",null,"To update an existing report, click here:","  ",l.a.createElement(C.a,{variant:"secondary",onClick:this.handleUpdateClick},"Update reports")),l.a.createElement("h4",null,"New report"),l.a.createElement(j.a,{onSubmit:this.handleSubmit},l.a.createElement(j.a.Group,{controlId:"formBasicNumber"},l.a.createElement(j.a.Label,null,"Week (number):"),l.a.createElement(j.a.Control,{type:"number",name:"week_nr",onChange:this.handleChange,required:!0})),l.a.createElement(j.a.Group,{controlId:"exampleForm.ControlTextarea1"},l.a.createElement(j.a.Label,null,"Text:"),l.a.createElement(j.a.Control,{as:"textarea",rows:"30",name:"kmom_text",onChange:this.handleChange,required:!0})),l.a.createElement(C.a,{variant:"primary",type:"submit"},"Submit")))))}}]),a}(l.a.Component),I=a(131),T=a.n(I),_=function(e){var t=e.match.params.kmom,a=Object(r.useState)(""),n=Object(h.a)(a,2),o=n[0],c=n[1];return Object(r.useEffect)((function(){fetch("https://me-api.charlottestrand.me/reports/week/".concat(t)).then((function(e){return e.json()})).then((function(e){c(e.data.kmom_text)})).catch((function(e){window.alert("There is no report with this week number!"),console.log("No report data:",e.message)}))})),l.a.createElement("main",null,l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,l.a.createElement("strong",null,"Week ",t)),l.a.createElement("div",{className:"content"},l.a.createElement(T.a,{source:o}))))},L=a(136),B=a(132),D=a.n(B),U=a(133),G=a.n(U),P=function(e){var t=e.users;return l.a.createElement("div",{className:"textContainer"},l.a.createElement("div",null,l.a.createElement("h1",null,"Welcome!")),t?l.a.createElement("div",null,l.a.createElement("h1",null,"Online users:"),l.a.createElement("div",{className:"activeContainer"},l.a.createElement("h2",null,t.map((function(e){var t=e.name;return l.a.createElement("div",{key:t,className:"activeItem"},t)}))))):null)},q=a(85),A=a.n(q),J=function(e){var t=e.message,a=t.text,n=t.user,r=!1,o=e.name.trim().toLowerCase(),c="Sent"+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds();return n===o&&(r=!0),r?l.a.createElement("div",{className:"messageContainer"},l.a.createElement("p",{className:"sentText"},o),l.a.createElement("div",{className:"messageBox"},l.a.createElement("p",{className:"messageText"},A.a.emojify(a)),l.a.createElement("p",{className:"timeStamp"},c))):l.a.createElement("div",{className:"messageContainer"},l.a.createElement("div",{className:"messageBox"},l.a.createElement("p",{className:"messageText"},A.a.emojify(a))),l.a.createElement("p",{className:"sentText"},n))},M=a(134),R=a.n(M),W=function(e){var t=e.messages,a=e.name;return l.a.createElement(R.a,{className:"messages"},t.map((function(e,t){return l.a.createElement("div",{key:t},l.a.createElement(J,{message:e,name:a}))})))},F=function(e){var t=e.room;return l.a.createElement("div",{className:"infoBar"},l.a.createElement("div",{className:"leftInnerContainer"},l.a.createElement("h3",null,t)),l.a.createElement("div",{className:"rightInnerContainer"},l.a.createElement("a",{className:"closeChatButton",href:"/chat"},"Close chat")))},H=function(e){var t=e.message,a=e.setMessage,n=e.sendMessage;return l.a.createElement("form",{className:"form"},l.a.createElement("input",{className:"input",placeholder:"Say something...",value:t,onChange:function(e){return a(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?n(e):null}}),l.a.createElement("button",{className:"sendButton",onClick:function(e){return n(e)}},"Send"))},K=function(e){var t=e.location,a=Object(r.useState)(""),o=Object(h.a)(a,2),c=o[0],s=o[1],m=Object(r.useState)(""),u=Object(h.a)(m,2),d=u[0],p=u[1],b=Object(r.useState)(""),E=Object(h.a)(b,2),g=E[0],v=E[1],f=Object(r.useState)(""),k=Object(h.a)(f,2),C=k[0],j=k[1],O=Object(r.useState)([]),y=Object(h.a)(O,2),w=y[0],S=y[1],N=Object(r.useState)(0),x=Object(h.a)(N,2),I=x[0],T=x[1];Object(r.useEffect)((function(){var e=D.a.parse(t.search),a=e.name,r=e.room;n=G()("https://socket-server.charlottestrand.me"),p(r),s(a),n.emit("join",{name:a,room:r},(function(e){e&&(T(1),alert(e))}))}),[t.search]),Object(r.useEffect)((function(){n.on("message",(function(e){S((function(t){return[].concat(Object(L.a)(t),[e])}))})),n.on("roomData",(function(e){var t=e.users;v(t)}))}),[]);return I?(console.log("flag"),l.a.createElement(i.a,{to:"/chat"})):l.a.createElement("div",{className:"outerContainer"},l.a.createElement("div",{className:"chatContainer"},l.a.createElement(F,{room:d}),l.a.createElement(W,{messages:w,name:c}),l.a.createElement(H,{message:C,setMessage:j,sendMessage:function(e){e.preventDefault(),C&&n.emit("sendMessage",C,(function(){return j("")}))}})),l.a.createElement(P,{users:g}))},$=function(){var e=Object(r.useState)(""),t=Object(h.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(""),c=Object(h.a)(o,2),i=c[0],m=c[1];return l.a.createElement("div",{className:"joinOuterContainer"},l.a.createElement("div",{className:"joinInnerContainer"},l.a.createElement("h1",{className:"heading"},"Join chat"),l.a.createElement("input",{placeholder:"Name",className:"joinInput",type:"text",onChange:function(e){return n(e.target.value)}}),l.a.createElement("input",{placeholder:"Room",className:"joinRoom",type:"text",onChange:function(e){return m(e.target.value)}}),l.a.createElement(s.b,{onClick:function(e){return a&&i?null:e.preventDefault()},to:"chat/join?name=".concat(a,"&room=").concat(i)},l.a.createElement("button",{className:"button-chat",type:"submit"},"Sign in"))))},z=function(){return l.a.createElement(s.a,null,l.a.createElement(m.a,{className:"navbar",variant:"dark"},l.a.createElement(m.a.Brand,{href:"/"},"Charlotte"),l.a.createElement(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(m.a.Collapse,{id:"basic-navbar-nav"},l.a.createElement(u.a,{className:"navbar"},l.a.createElement(u.a.Link,{className:"navbar-link",href:"/"},"Hem"),l.a.createElement(u.a.Link,{href:"/"},"Me"),l.a.createElement(u.a.Link,{href:"/reports/show"},"Reports"),l.a.createElement(u.a.Link,{href:"/register"},"Register"),l.a.createElement(u.a.Link,{href:"/login"},"Login"),l.a.createElement(u.a.Link,{href:"/chat"},"Chat")))),l.a.createElement(i.b,{exact:!0,path:"/",component:p}),l.a.createElement(i.b,{path:"/reports/show",component:O}),l.a.createElement(i.b,{path:"/reports/add",component:x}),l.a.createElement(i.b,{path:"/reports/update",component:w}),l.a.createElement(i.b,{path:"/reports/week/:kmom",component:_}),l.a.createElement(i.b,{path:"/register",component:S}),l.a.createElement(i.b,{path:"/login",component:N}),l.a.createElement(i.b,{path:"/chat/join",component:K}),l.a.createElement(i.b,{path:"/chat",component:$}))};a(333),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(z,null),document.querySelector("#home")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[334,1,2]]]);
//# sourceMappingURL=main.dab50432.chunk.js.map